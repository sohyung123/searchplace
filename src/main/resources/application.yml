spring:
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:tcp://localhost/~/test
    username: sa
    password:
  cloud:
    openfeign:
      client:
        config:
          feignName:
            connectTimeout: 5000
            readTimeout: 5000
      circuitbreaker:
        enabled: true

resilience4j:
  circuitbreaker:
    configs:
      default:
        slidingWindowSize: 10 #10번 요청해서 실패율이 50%가 넘으면 서킷브레이커 open
        failureRateThreshold: 50 #10번 요청해서 실패율이 50%가 넘으면 서킷브레이커 open
        waitDurationInOpenState: 30s # 기본값(60s)보다 작게 설정하여 HALF_OPEN 상태로 빨리 전환되어 장애복구 시도
        slowCallDurationThreshold: 5s # 해당 값은 TimeLimiter의 timeoutDuration보다 작아야 함
        registerHealthIndicator: true
        recordFailurePredicate: com.example.searchplace.feign.RecordFailurePredicate
    instances:
      default:
        baseConfig: default
  timelimiter:
    configs:
      default:
        timeoutDuration: 6s # slowCallDurationThreshold보다는 크게 설정
        cancelRunningFuture: true

management:
  endpoints:
    web:
      exposure:
        include: "*"